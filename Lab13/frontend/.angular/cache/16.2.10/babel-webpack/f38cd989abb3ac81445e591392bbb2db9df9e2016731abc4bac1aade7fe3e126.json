{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ItemComponent = class ItemComponent {\n  constructor(itemService) {\n    this.itemService = itemService;\n    this.items = [];\n    this.currentItem = {};\n    this.successMessage = '';\n    this.deleteItemId = '';\n    this.searchTerm = '';\n    this.showModal = false;\n    this.modalTitle = 'Agregar Película';\n    this.showDeleteConfirmationModal = false;\n  }\n  ngOnInit() {\n    this.getItems();\n  }\n  getItems() {\n    this.itemService.getItems().subscribe(items => {\n      this.items = items;\n    });\n  }\n  getItemById(id) {\n    this.itemService.getItemById(id).subscribe(item => {\n      this.currentItem = item;\n    });\n  }\n  createItem(item) {\n    this.itemService.createItem(item).subscribe(() => {\n      this.getItems();\n      this.currentItem = {};\n      this.closeModal();\n      this.currentItem.fecha = this.formatDate(this.currentItem.fecha);\n      this.successMessage = 'Pelicula creada exitosamente.';\n      setTimeout(() => {\n        this.successMessage = '';\n      }, 3000);\n    }, error => {\n      console.error('Error al agregar película:', error);\n    });\n  }\n  updateItem(id, item) {\n    this.itemService.updateItem(id, item).subscribe(() => {\n      this.getItems();\n      this.currentItem = {};\n      this.closeModal();\n      this.currentItem.fecha = this.formatDate(this.currentItem.fecha);\n      this.successMessage = 'Pelicula actualizada correctamente.';\n      setTimeout(() => {\n        this.successMessage = '';\n      }, 3000);\n    }, error => {\n      console.error('Error al actualizar película:', error);\n    });\n  }\n  deleteItem(id) {\n    this.itemService.deleteItem(id).subscribe(() => {\n      this.getItems();\n      this.successMessage = 'Pelicula eliminada correctamente.';\n      setTimeout(() => {\n        this.successMessage = '';\n      }, 3000);\n    });\n  }\n  editItem(id) {\n    this.getItemById(id);\n    this.openModal();\n  }\n  deleteConfirmed() {\n    // Lógica para eliminar un item después de confirmación\n    this.items = this.items.filter(item => item._id !== this.deleteItemId);\n    this.deleteItemId = '';\n  }\n  // Filtrar y ordenar la lista\n  get filteredItems() {\n    return this.items.filter(item => item.name.toLowerCase().includes(this.searchTerm.toLowerCase()) || item.description.toLowerCase().includes(this.searchTerm.toLowerCase())).sort((a, b) => a.name.localeCompare(b.description));\n  }\n  // Función para abrir el modal\n  openModal() {\n    this.showModal = true;\n    this.modalTitle = this.currentItem._id ? 'Editar Película' : 'Agregar Película';\n  }\n  // Función para cerrar el modal\n  closeModal() {\n    this.showModal = false;\n    this.modalTitle = 'Agregar Película';\n  }\n  confirmDelete(item) {\n    const isConfirmed = window.confirm(`¿Estás seguro de que deseas eliminar la película \"${item.name}\"?`);\n    if (isConfirmed) {\n      // Realizar la lógica para eliminar el elemento\n      this.deleteItem(item._id);\n    }\n  }\n  openDeleteConfirmationModal(item) {\n    this.deleteConfirmationItem = item;\n    this.showDeleteConfirmationModal = true;\n  }\n  closeDeleteConfirmationModal() {\n    this.deleteConfirmationItem = null;\n    this.showDeleteConfirmationModal = false;\n  }\n  formatDate(date) {\n    // Formatear la fecha como sea necesario\n    return new Date(date).toISOString();\n  }\n};\nItemComponent = __decorate([Component({\n  selector: 'app-item',\n  templateUrl: './item.component.html',\n  styleUrls: ['./item.component.css']\n})], ItemComponent);","map":{"version":3,"names":["Component","ItemComponent","constructor","itemService","items","currentItem","successMessage","deleteItemId","searchTerm","showModal","modalTitle","showDeleteConfirmationModal","ngOnInit","getItems","subscribe","getItemById","id","item","createItem","closeModal","fecha","formatDate","setTimeout","error","console","updateItem","deleteItem","editItem","openModal","deleteConfirmed","filter","_id","filteredItems","name","toLowerCase","includes","description","sort","a","b","localeCompare","confirmDelete","isConfirmed","window","confirm","openDeleteConfirmationModal","deleteConfirmationItem","closeDeleteConfirmationModal","date","Date","toISOString","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/dev/Development/DAWA/LABS-DAWA-ECASTRO/Lab13/frontend/src/app/item/item.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ItemService } from '../item.service';\n\n@Component({\n  selector: 'app-item',\n  templateUrl: './item.component.html',\n  styleUrls: ['./item.component.css'],\n})\nexport class ItemComponent implements OnInit {\n  items: any[] = [];\n  currentItem: any = {};\n  successMessage: string = '';\n  deleteItemId: string = '';\n  searchTerm: string = '';\n\n  constructor(private itemService: ItemService) {}\n\n  ngOnInit(): void {\n    this.getItems();\n  }\n\n  getItems(): void {\n    this.itemService.getItems().subscribe((items) => {\n      this.items = items;\n    });\n  }\n\n  getItemById(id: string): void {\n    this.itemService.getItemById(id).subscribe((item) => {\n      this.currentItem = item;\n    });\n  }\n\n  createItem(item: any): void {\n    this.itemService.createItem(item).subscribe(\n      () => {\n        this.getItems();\n        this.currentItem = {};\n        this.closeModal();\n        this.currentItem.fecha = this.formatDate(this.currentItem.fecha);\n        this.successMessage = 'Pelicula creada exitosamente.';\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      },\n      (error) => {\n        console.error('Error al agregar película:', error);\n      }\n    );\n  }\n\n  updateItem(id: string, item: any): void {\n    this.itemService.updateItem(id, item).subscribe(\n      () => {\n        this.getItems();\n        this.currentItem = {};\n        this.closeModal();\n        this.currentItem.fecha = this.formatDate(this.currentItem.fecha);\n        this.successMessage = 'Pelicula actualizada correctamente.';\n        setTimeout(() => {\n          this.successMessage = '';\n        }, 3000);\n      },\n      (error) => {\n        console.error('Error al actualizar película:', error);\n      }\n    );\n  }\n\n  deleteItem(id: string): void {\n    this.itemService.deleteItem(id).subscribe(() => {\n      this.getItems();\n      this.successMessage = 'Pelicula eliminada correctamente.';\n      setTimeout(() => {\n        this.successMessage = '';\n      }, 3000);\n    });\n  }\n\n  editItem(id: string): void {\n    this.getItemById(id);\n    this.openModal();\n  }\n\n  deleteConfirmed(): void {\n    // Lógica para eliminar un item después de confirmación\n    this.items = this.items.filter((item) => item._id !== this.deleteItemId);\n    this.deleteItemId = '';\n  }\n  // Filtrar y ordenar la lista\n  get filteredItems(): any[] {\n    return this.items\n      .filter(\n        (item) =>\n          item.name.toLowerCase().includes(this.searchTerm.toLowerCase()) ||\n          item.description.toLowerCase().includes(this.searchTerm.toLowerCase())\n      )\n      .sort((a, b) => a.name.localeCompare(b.description));\n  }\n  showModal: boolean = false;\n  modalTitle: string = 'Agregar Película';\n\n  // Función para abrir el modal\n  openModal() {\n    this.showModal = true;\n    this.modalTitle = this.currentItem._id\n      ? 'Editar Película'\n      : 'Agregar Película';\n  }\n\n  // Función para cerrar el modal\n  closeModal() {\n    this.showModal = false;\n    this.modalTitle = 'Agregar Película';\n  }\n  confirmDelete(item: any): void {\n    const isConfirmed = window.confirm(\n      `¿Estás seguro de que deseas eliminar la película \"${item.name}\"?`\n    );\n\n    if (isConfirmed) {\n      // Realizar la lógica para eliminar el elemento\n      this.deleteItem(item._id);\n    }\n  }\n  deleteConfirmationItem: any;\n  showDeleteConfirmationModal: boolean = false;\n\n  openDeleteConfirmationModal(item: any): void {\n    this.deleteConfirmationItem = item;\n    this.showDeleteConfirmationModal = true;\n  }\n\n  closeDeleteConfirmationModal(): void {\n    this.deleteConfirmationItem = null;\n    this.showDeleteConfirmationModal = false;\n  }\n  formatDate(date: Date): string {\n    // Formatear la fecha como sea necesario\n    return new Date(date).toISOString();\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}